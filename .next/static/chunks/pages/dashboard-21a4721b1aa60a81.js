(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7135:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(7876),r=a(4232),n=a(9099),o=a(1040),l=a(7953),i=a(2568),c=a(6557),d=a.n(c);let x=e=>{let{open:t,title:a,onCancel:n,onSave:o,onUpdate:c,taskData:x,isEditing:m=!1}=e,[p,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[v,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{m&&x?(u(x.taskName),g(x.description||""),f(x.dueDate?d()(x.dueDate):null)):(u(""),g(""),f(d()()))},[m,x,t]);let k=()=>{u(""),g(""),f(d()()),n()};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.A,{className:"modal-container",title:(0,s.jsx)("h2",{className:"text-[24px] leading-[35%] font-[700] text-center mb-[34px]",children:a}),centered:!0,closeIcon:!1,open:t,footer:!1,onCancel:k,width:600,children:(0,s.jsx)("div",{className:"form-container max-w-[375px] m-auto",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"mb-6 max-[768px]:text-center",children:(0,s.jsx)("input",{type:"text",placeholder:"Enter Task Name",value:p,onChange:e=>u(e.target.value),className:"w-full h-[60px] max-[768px]:max-w-[90%] max-[768px]:h-[46px] text-[16px] bg-gray-100 border-0 rounded-[8px] placeholder-gray-500 px-4 focus:outline-none"})}),(0,s.jsx)("div",{className:"mb-6 max-[768px]:text-center",children:(0,s.jsx)("input",{type:"text",placeholder:"Description",value:h,onChange:e=>g(e.target.value),className:"w-full text-[16px] max-[768px]:max-w-[90%] max-[768px]:h-[46px] bg-gray-100 border-0 rounded-[8px] placeholder-gray-500 px-4 py-4 focus:outline-none resize-none"})}),(0,s.jsx)("div",{className:"mb-8 max-[768px]:text-center",children:(0,s.jsx)(i.A,{placeholder:"Select Date",value:v,onChange:e=>f(e),format:"DD/MM/YYYY",className:"w-full h-[60px] text-[16px] bg-gray-100 border-0 rounded-[8px] max-[768px]:max-w-[90%] max-[768px]:h-[46px]",style:{backgroundColor:"#f3f4f6",border:"none",boxShadow:"none"}})}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-[40px] mt-8",children:[(0,s.jsx)("button",{onClick:()=>{let e={taskName:p,description:h,date:v};m&&x?(e.id=x._id,c&&c(e)):o&&o(e),u(""),g(""),f(d()()),n()},className:"w-[90px] h-[47px] bg-[#1E3BA3] hover:bg-[#1E3BA3]/90 border-0 rounded-[25px] text-[14px] leading-[35%] font-semibold text-white cursor-pointer",children:m?"Update":"Save"}),(0,s.jsx)("button",{onClick:k,className:"text-[18px] font-medium text-gray-700 hover:text-gray-900 border-0 bg-transparent text-[14px] leading-[35%] font-semibold text-dark cursor-pointer",children:"Cancel"})]})]})})})})};function m(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)([]),[p,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),[v,f]=(0,r.useState)(null),[k,j]=(0,r.useState)("Add Task"),[b,N]=(0,r.useState)(null),[y,w]=(0,r.useState)(1),[S]=(0,r.useState)(5),C=(0,n.useRouter)(),A=()=>localStorage.getItem("token")||sessionStorage.getItem("token"),E=()=>{let e=localStorage.getItem("user")||sessionStorage.getItem("user");if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing user data:",e)}return null};(0,r.useEffect)(()=>{let e=A(),t=E();if(!e||!t){localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),C.push("/login");return}N(t),B()},[]),(0,r.useEffect)(()=>{let e=()=>{let e=A(),t=E();e&&t||(localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),C.push("/login"))},t=setInterval(e,5e3);return window.addEventListener("focus",e),()=>{clearInterval(t),window.removeEventListener("focus",e)}},[]);let B=async()=>{try{let e=A(),t=await o.A.get("https://lemon-pay-backend.vercel.app/tasks",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});200===t.status&&m(t.data.tasks)}catch(t){var e;console.error("Fetch tasks error:",t),o.A.isAxiosError(t)&&(null==(e=t.response)?void 0:e.status)===401&&(localStorage.removeItem("token"),sessionStorage.removeItem("token"),C.push("/login"))}finally{u(!1)}},D=async e=>{try{let a=A(),s=e.date?new Date(e.date.format("YYYY-MM-DD")).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],r=await o.A.post("https://lemon-pay-backend.vercel.app/tasks",{taskName:e.taskName,description:e.description,dueDate:s},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});201===r.status&&(B(),t(!1))}catch(e){console.error("Create task error:",e),t(!1)}},I=async e=>{try{let a=A(),s=e.date?new Date(e.date.format("YYYY-MM-DD")).toISOString().split("T")[0]:void 0,r=await o.A.post("https://lemon-pay-backend.vercel.app/tasks/update/",{id:e.id,taskName:e.taskName,description:e.description,dueDate:s},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});200===r.status&&(B(),t(!1),g(!1),f(null))}catch(e){console.error("Update task error:",e)}},L=async e=>{try{let t=A(),a=await o.A.post("https://lemon-pay-backend.vercel.app/tasks/delete/",{id:e},{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});200===a.status&&B()}catch(e){console.error("Delete task error:",e)}};(0,r.useEffect)(()=>{let e=()=>{l(null),c(!1)};return(null!==a||i)&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[a,i]);let M=Math.ceil(d.length/S),T=(y-1)*S,_=d.slice(T,T+S);return p?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-[#1E3BA3] text-xl",children:"Loading tasks..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-8 dashboard-container max-[768px]:max-w-[90%] max-[768px]:mx-auto max-[768px]:py-[50px] max-[768px]:px-[0]",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8 max-[768px]:flex-col max-[768px]:gap-[24px]",children:[(0,s.jsx)("h1",{className:"text-[36px] max-[768px]:text-[24px] max-[768px]:leading-[70%] leading-[2%] font-semibold text-[#1E3BA3]",children:"Tasks Management"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("button",{onClick:()=>{g(!1),f(null),j("Add Task"),t(!0)},className:"bg-[#1E3BA3] hover:bg-[#1E3BA3]/90 text-white px-6 py-3 rounded-full flex items-center gap-2 transition-colors cursor-pointer max-[768px]:text-[10px] max-[768px]:max-w-[110px]",children:[(0,s.jsx)("svg",{className:"w-5 h-5 max-[768px]:w-[10px] max-[768px]:h-[10px]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Task"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),c(!i),l(null)},className:"cursor-pointer flex items-center gap-2 bg-[#1E3BA3] text-white px-3 py-2 rounded-full hover:bg-[#1E3BA3]/90 transition-colors focus:outline-none focus:ring-2 focus:ring-[#1E3BA3] focus:ring-offset-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-[#1E3BA3] text-white rounded-full flex items-center justify-center font-semibold text-sm border-2 border-white",children:(null==b?void 0:b.email)?(e=>{if(!e)return"US";let t=e.split("@")[0];return t.length>=2?t.substring(0,2).toUpperCase():1===t.length?t.toUpperCase()+"U":"US"})(b.email):"US"}),(0,s.jsx)("svg",{className:"w-4 h-4 transition-transform duration-200 ".concat(i?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,s.jsxs)("div",{className:"absolute right-0 top-12 z-20 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[250px] py-2",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Signed in as"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 truncate",children:(null==b?void 0:b.email)||"user@example.com"})]}),(0,s.jsx)("div",{className:"py-1",children:(0,s.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),c(!1),C.push("/login")},className:"w-full px-4 cursor-pointer py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign out"]})})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-6 py-4 max-[768px]:hidden",children:[(0,s.jsx)("div",{className:"col-span-1 text-[20px] leading-[136%] font-medium text-[#1E3BA3]",children:"No"}),(0,s.jsx)("div",{className:"col-span-2 text-[20px] leading-[136%] font-medium text-[#1E3BA3]",children:"Date & Time"}),(0,s.jsx)("div",{className:"col-span-2 text-[20px] leading-[136%] font-medium text-[#1E3BA3]",children:"Task"}),(0,s.jsx)("div",{className:"col-span-6 text-[20px] leading-[136%] font-medium text-[#1E3BA3]",children:"Description"}),(0,s.jsx)("div",{className:"col-span-1 text-[20px] leading-[136%] font-medium text-[#1E3BA3]",children:"Action"})]}),_.map((e,r)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 align-items gap-4 px-6 py-6 border-t border-b border-gray-100 transition-colors task-list max-[768px]:grid-cols-1 max-[768px]:gap-2 max-[768px]:relative items-center",children:[(0,s.jsx)("div",{className:"list col-span-1 text-[16px] leading-[96%] font-medium max-[768px]:hidden",children:T+r+1}),(0,s.jsx)("div",{className:"list col-span-2 text-[16px] leading-[96%] max-[768px]:hidden",children:new Date(e.dueDate).toLocaleDateString()}),(0,s.jsx)("div",{className:"list col-span-2 text-[16px] leading-[96%] font-medium max-[768px]:hidden",children:e.taskName}),(0,s.jsx)("div",{className:"list col-span-6 text-[16px] leading-[96%] leading-relaxed max-[768px]:hidden",children:e.description}),(0,s.jsx)("div",{className:"list hidden max-[768px]:block text-[16px] leading-[96%] font-medium mb-2",children:e.taskName}),(0,s.jsx)("div",{className:"list hidden max-[768px]:block text-[16px] leading-[96%] leading-relaxed mb-2",children:e.description}),(0,s.jsx)("div",{className:"list hidden max-[768px]:block text-[16px] leading-[96%] mb-2",children:new Date(e.dueDate).toLocaleDateString()}),(0,s.jsxs)("div",{className:"list col-span-1 relative max-[768px]:flex max-[768px]:justify-end max-[768px]:absolute max-[768px]:top-[20px] max-[768px]:right-0",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),l(a===r?null:r),c(!1)},className:"text-gray-400 hover:text-gray-600 transition-colors cursor-pointer",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),a===r&&(0,s.jsxs)("div",{className:"absolute right-0 top-8 z-10 bg-white border border-gray-200 rounded-lg shadow-lg min-w-[120px] py-2 z-10",children:[(0,s.jsxs)("button",{onClick:()=>{f(e),g(!0),j("Update Task"),t(!0),l(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,s.jsxs)("button",{onClick:()=>{confirm("Are you sure you want to delete this task?")&&L(e._id),l(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]})]})]},e._id))]}),(0,s.jsxs)("div",{className:"flex justify-center items-center mt-8 gap-2",children:[(0,s.jsx)("button",{onClick:()=>{y>1&&w(y-1)},disabled:1===y,className:"p-2 transition-colors ".concat(1===y?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600 cursor-pointer"),children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(()=>{let e=[],t=Math.max(2,M);for(let a=1;a<=t;a++)e.push(a);return e})().map(e=>(0,s.jsx)("button",{onClick:()=>{w(e),l(null)},disabled:e>1&&d.length<=S,className:"w-8 h-8 rounded text-sm font-medium transition-colors ".concat(e===y?"bg-blue-600 text-white":e>1&&d.length<=S?"text-gray-300 cursor-not-allowed":"text-gray-600 hover:bg-gray-100 cursor-pointer"),children:e},e)),(0,s.jsx)("button",{onClick:()=>{y<M&&w(y+1)},disabled:d.length<=S||y===M,className:"p-2 transition-colors ".concat(d.length<=S||y===M?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-gray-600"),children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})}),(0,s.jsx)(x,{title:k,open:e,onCancel:()=>{t(!1),g(!1),f(null),j("Add Task")},onSave:D,onUpdate:I,taskData:v,isEditing:h})]})}},7721:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return a(7135)}])}},e=>{e.O(0,[846,116,636,593,792],()=>e(e.s=7721)),_N_E=e.O()}]);